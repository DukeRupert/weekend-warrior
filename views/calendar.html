
    <div class="calendar">
        <div class="header">
           <div class="nav-controls">
                <select id="yearSelect" class="year-select" onchange="changeYear()">
                    {{range .YearOptions}}
                        <option value="{{.}}" {{if eq . $.Year}}selected{{end}}>
                            {{.}}
                        </option>
                    {{end}}
                </select>
            </div> </div>
        <div class="header">
            <button class="nav-button" onclick="navigate(-1)"><</button>
            <div class="nav-controls">
                <div class="month-year">{{.MonthName}}</div>
            </div>
            <button class="nav-button" onclick="navigate(1)">></button>
        </div>
        <div class="weekdays">
            <div>Sun</div>
            <div>Mon</div>
            <div>Tue</div>
            <div>Wed</div>
            <div>Thu</div>
            <div>Fri</div>
            <div>Sat</div>
        </div>
        <div class="days">
            {{range .Days}}
                {{range .}}
                    {{if eq .Day 0}}
                        <div class="day empty"></div>
                    {{else}}
                        <div class="day{{if .IsToday}} today{{end}}{{if .IsFirstDay}} first-day{{end}}{{if .IsSecondDay}} second-day{{end}}{{if .IsProtected}} protected{{end}}">
                            {{.Day}}
                        </div>
                    {{end}}
                {{end}}
            {{end}}
        </div>
    </div>

<script>
    function navigate(offset) {
        const yearSelect = document.getElementById('yearSelect');
        const urlParams = new URLSearchParams(window.location.search);
        let year = parseInt(yearSelect.value);
        let month = parseInt(urlParams.get('month')) || {{.Month}};
        
        month += offset;
        if (month > 12) {
            month = 1;
            year++;
            yearSelect.value = year;
        } else if (month < 1) {
            month = 12;
            year--;
            yearSelect.value = year;
        }
        
        window.location.href = '?year=' + year + '&month=' + month;
    }

    function changeYear() {
        const year = document.getElementById('yearSelect').value;
        const urlParams = new URLSearchParams(window.location.search);
        const month = urlParams.get('month') || {{.Month}};
        
        window.location.href = '?year=' + year + '&month=' + month;
    }
</script>